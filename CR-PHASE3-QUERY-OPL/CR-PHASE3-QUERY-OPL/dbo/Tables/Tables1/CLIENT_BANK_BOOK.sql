CREATE TABLE [dbo].[CLIENT_BANK_BOOK] (
    [ID]                         BIGINT          IDENTITY (1, 1) NOT NULL,
    [CLIENT_CODE]                NVARCHAR (50)   NOT NULL,
    [PERIODE_YEAR]               NVARCHAR (4)    NOT NULL,
    [PERIODE_MONTH]              NVARCHAR (2)    NOT NULL,
    [CLIENT_BANK_CODE]           NVARCHAR (50)   NOT NULL,
    [OPENING_BALANCE_AMOUNT]     DECIMAL (18, 2) CONSTRAINT [DF_SYS_CLIENT_BANK_BOOK_OPENING_BALANCE] DEFAULT ((0)) NOT NULL,
    [ENDING_BALANCE_AMOUNT]      DECIMAL (18, 2) CONSTRAINT [DF_SYS_CLIENT_BANK_BOOK_ENDING_BALANCE] DEFAULT ((0)) NOT NULL,
    [TOTAL_CR_MUTATION_AMOUNT]   DECIMAL (18, 2) CONSTRAINT [DF_CLIENT_BANK_BOOK_TOTAL_CR_MUTATION_AMOUNT] DEFAULT ((0)) NOT NULL,
    [TOTAL_DB_MUTATION_AMOUNT]   DECIMAL (18, 2) CONSTRAINT [DF_CLIENT_BANK_BOOK_TOTAL_DB_MUTATION_AMOUNT] DEFAULT ((0)) NOT NULL,
    [FREQ_CREDIT_MUTATION]       INT             CONSTRAINT [DF_CLIENT_BANK_BOOK_FREQ_CREDIT_MUTATION] DEFAULT ((0)) NOT NULL,
    [FREQ_DEBET_MUTATION]        INT             CONSTRAINT [DF_CLIENT_BANK_BOOK_FREQ_DEBET_MUTATION] DEFAULT ((0)) NOT NULL,
    [AVERAGE_CR_MUTATION_AMOUNT] DECIMAL (18, 2) CONSTRAINT [DF_CLIENT_BANK_BOOK_AVERAGE_CR_MUTATION_AMOUNT] DEFAULT ((0)) NOT NULL,
    [AVERAGE_DB_MUTATION_AMOUNT] DECIMAL (18, 2) CONSTRAINT [DF_CLIENT_BANK_BOOK_AVERAGE_DB_MUTATION_AMOUNT] DEFAULT ((0)) NOT NULL,
    [AVERAGE_BALANCE_AMOUNT]     DECIMAL (18, 2) CONSTRAINT [DF_CLIENT_BANK_BOOK_AVERAGE_BALANCE_AMOUNT] DEFAULT ((0)) NOT NULL,
    [HIGHEST_BALANCE_AMOUNT]     DECIMAL (18, 2) CONSTRAINT [DF_CLIENT_BANK_BOOK_HIGHEST_BALANCE_AMOUNT] DEFAULT ((0)) NOT NULL,
    [LOWEST_BALANCE_AMOUNT]      DECIMAL (18, 2) CONSTRAINT [DF_CLIENT_BANK_BOOK_LOWEST_BALANCE_AMOUNT] DEFAULT ((0)) NOT NULL,
    [CRE_DATE]                   DATETIME        NOT NULL,
    [CRE_BY]                     NVARCHAR (12)   NOT NULL,
    [CRE_IP_ADDRESS]             NVARCHAR (15)   NOT NULL,
    [MOD_DATE]                   DATETIME        NOT NULL,
    [MOD_BY]                     NVARCHAR (12)   NOT NULL,
    [MOD_IP_ADDRESS]             NVARCHAR (15)   NOT NULL,
    CONSTRAINT [PK_CLIENT_BANK_BOOK_1] PRIMARY KEY CLUSTERED ([ID] ASC, [CLIENT_CODE] ASC, [CLIENT_BANK_CODE] ASC),
    CONSTRAINT [FK_CLIENT_BANK_BOOK_CLIENT_BANK] FOREIGN KEY ([CLIENT_BANK_CODE]) REFERENCES [dbo].[CLIENT_BANK] ([CODE]),
    CONSTRAINT [FK_CLIENT_BANK_BOOK_CLIENT_MAIN] FOREIGN KEY ([CLIENT_CODE]) REFERENCES [dbo].[CLIENT_MAIN] ([CODE]) ON DELETE CASCADE ON UPDATE CASCADE
);

