CREATE TABLE [dbo].[MAINTENANCE] (
    [CODE]                     NVARCHAR (50)   CONSTRAINT [DF_MAINTENANCE_CODE] DEFAULT ('') NOT NULL,
    [COMPANY_CODE]             NVARCHAR (50)   CONSTRAINT [DF_MAINTENANCE_COMPANY_CODE] DEFAULT ('') NOT NULL,
    [ASSET_CODE]               NVARCHAR (50)   CONSTRAINT [DF_MAINTENANCE_ASSET_CODE] DEFAULT ('') NOT NULL,
    [TRANSACTION_DATE]         DATETIME        NOT NULL,
    [TRANSACTION_AMOUNT]       DECIMAL (18, 2) CONSTRAINT [DF_MAINTENANCE_TRANSACTION_AMOUNT] DEFAULT ((0)) NOT NULL,
    [BRANCH_CODE]              NVARCHAR (50)   CONSTRAINT [DF_MAINTENANCE_BRANCH_CODE] DEFAULT ('') NOT NULL,
    [BRANCH_NAME]              NVARCHAR (250)  CONSTRAINT [DF_MAINTENANCE_BRANCH_NAME] DEFAULT ('') NOT NULL,
    [REQUESTOR_CODE]           NVARCHAR (50)   CONSTRAINT [DF_MAINTENANCE_REQUESTOR_CODE] DEFAULT ('') NULL,
    [REQUESTOR_NAME]           NVARCHAR (250)  CONSTRAINT [DF_MAINTENANCE_REQUESTOR_CODE1] DEFAULT ('') NULL,
    [DIVISION_CODE]            NVARCHAR (50)   CONSTRAINT [DF_MAINTENANCE_DIVISION_CODE] DEFAULT ('') NOT NULL,
    [DIVISION_NAME]            NVARCHAR (250)  CONSTRAINT [DF_MAINTENANCE_DIVISION_NAME] DEFAULT ('') NOT NULL,
    [DEPARTMENT_CODE]          NVARCHAR (50)   CONSTRAINT [DF_MAINTENANCE_DEPARTMENT_CODE] DEFAULT ('') NOT NULL,
    [DEPARTMENT_NAME]          NVARCHAR (250)  CONSTRAINT [DF_MAINTENANCE_DEPARTMENT_NAME] DEFAULT ('') NOT NULL,
    [MAINTENANCE_BY]           NVARCHAR (50)   CONSTRAINT [DF_MAINTENANCE_MAINTENANCE_BY] DEFAULT ('') NOT NULL,
    [VENDOR_CODE]              NVARCHAR (50)   NULL,
    [VENDOR_NAME]              NVARCHAR (250)  NULL,
    [STATUS]                   NVARCHAR (20)   CONSTRAINT [DF_MAINTENANCE_STATUS] DEFAULT ('') NOT NULL,
    [REMARK]                   NVARCHAR (4000) CONSTRAINT [DF_MAINTENANCE_REMARK] DEFAULT ('') NULL,
    [ACTUAL_KM]                INT             NULL,
    [WORK_DATE]                DATETIME        NULL,
    [SERVICE_TYPE]             NVARCHAR (20)   NULL,
    [HOUR_METER]               INT             NULL,
    [VENDOR_CITY_NAME]         NVARCHAR (250)  NULL,
    [VENDOR_PROVINCE_NAME]     NVARCHAR (250)  NULL,
    [VENDOR_ADDRESS]           NVARCHAR (4000) NULL,
    [VENDOR_PHONE]             NVARCHAR (20)   NULL,
    [VENDOR_BANK_NAME]         NVARCHAR (250)  NULL,
    [VENDOR_BANK_ACCOUNT_NO]   NVARCHAR (50)   NULL,
    [VENDOR_BANK_ACCOUNT_NAME] NVARCHAR (250)  NULL,
    [IS_REIMBURSE]             NVARCHAR (5)    NULL,
    [BANK_CODE]                NVARCHAR (50)   NULL,
    [BANK_NAME]                NVARCHAR (250)  NULL,
    [BANK_ACCOUNT_NO]          NVARCHAR (50)   NULL,
    [BANK_ACCOUNT_NAME]        NVARCHAR (50)   NULL,
    [CRE_DATE]                 DATETIME        NOT NULL,
    [CRE_BY]                   NVARCHAR (15)   NOT NULL,
    [CRE_IP_ADDRESS]           NVARCHAR (50)   NOT NULL,
    [MOD_DATE]                 DATETIME        NOT NULL,
    [MOD_BY]                   NVARCHAR (15)   NOT NULL,
    [MOD_IP_ADDRESS]           NVARCHAR (50)   NOT NULL,
    [SPK_NO]                   NVARCHAR (50)   NULL,
    [SA_VENDOR_NAME]           NVARCHAR (50)   NULL,
    [SA_VENDOR_AREA_PHONE]     NVARCHAR (5)    NULL,
    [SA_VENDOR_PHONE_NO]       NVARCHAR (20)   NULL,
    [VENDOR_NPWP]              NVARCHAR (20)   NULL,
    [VENDOR_TYPE]              NVARCHAR (25)   NULL,
    [FREE_SERVICE]             NVARCHAR (1)    NULL,
    [LAST_KM_SERVICE]          INT             NULL,
    [NITKU]                    NVARCHAR (50)   NULL,
    [NPWP_PUSAT]               NVARCHAR (50)   NULL,
    [FILE_NAME]                NVARCHAR (250)  NULL,
    [FILE_PATH]                NVARCHAR (250)  NULL,
    [ESTIMATED_START_DATE]     DATETIME        NULL,
    [ESTIMATED_FINISH_DATE]    DATETIME        NULL,
    [CALL_CENTER_TICKET_NO]    NVARCHAR (50)   NULL,
    [IS_REQUEST_REPLACEMENT]   NVARCHAR (1)    NULL,
    [DELIVERY_ADDRESS]         NVARCHAR (4000) NULL,
    [CONTACT_NAME]             NVARCHAR (250)  NULL,
    [CONTACT_PHONE_NO]         NVARCHAR (50)   NULL,
    [REASON_CODE]              NVARCHAR (50)   NULL,
    [START_DATE]               DATETIME        NULL,
    [FINISH_DATE]              DATETIME        NULL,
    [REMARK_RETURN]            NVARCHAR (4000) NULL,
    [COUNT_RETURN]             INT             NULL,
    CONSTRAINT [PK_MAINTENANCE_1] PRIMARY KEY CLUSTERED ([CODE] ASC),
    CONSTRAINT [FK_MAINTENANCE_ASSET] FOREIGN KEY ([ASSET_CODE]) REFERENCES [dbo].[ASSET] ([CODE])
);


GO
CREATE NONCLUSTERED INDEX [IDX_MAINTENANCE_20231009]
    ON [dbo].[MAINTENANCE]([STATUS] ASC)
    INCLUDE([ASSET_CODE]);


GO
CREATE NONCLUSTERED INDEX [IDX_RPT_ASSET_PER_UNIT_20240104]
    ON [dbo].[MAINTENANCE]([ASSET_CODE] ASC);

